{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ActionImpl = void 0;\n\nvar tiny_invariant_1 = __importDefault(require(\"tiny-invariant\"));\n\nvar Command_1 = require(\"./Command\");\n\nvar ActionImpl =\n/** @class */\nfunction () {\n  function ActionImpl(action, options) {\n    var _this = this;\n\n    var _a;\n\n    this.ancestors = [];\n    this.children = [];\n    Object.assign(this, action);\n    this.id = action.id;\n    this.name = action.name;\n    var perform = action.perform;\n    this.command = perform && new Command_1.Command({\n      perform: function () {\n        return perform(_this);\n      }\n    }, {\n      history: options.history\n    }); // Backwards compatibility\n\n    this.perform = (_a = this.command) === null || _a === void 0 ? void 0 : _a.perform;\n\n    if (action.parent) {\n      var parentActionImpl = options.store[action.parent];\n      (0, tiny_invariant_1.default)(parentActionImpl, \"attempted to create an action whos parent: \" + action.parent + \" does not exist in the store.\");\n      parentActionImpl.addChild(this);\n    }\n  }\n\n  ActionImpl.prototype.addChild = function (childActionImpl) {\n    // add all ancestors for the child action\n    childActionImpl.ancestors.unshift(this);\n    var parent = this.parentActionImpl;\n\n    while (parent) {\n      childActionImpl.ancestors.unshift(parent);\n      parent = parent.parentActionImpl;\n    } // we ensure that order of adding always goes\n    // parent -> children, so no need to recurse\n\n\n    this.children.push(childActionImpl);\n  };\n\n  ActionImpl.prototype.removeChild = function (actionImpl) {\n    var _this = this; // recursively remove all children\n\n\n    var index = this.children.indexOf(actionImpl);\n\n    if (index !== -1) {\n      this.children.splice(index, 1);\n    }\n\n    if (actionImpl.children) {\n      actionImpl.children.forEach(function (child) {\n        _this.removeChild(child);\n      });\n    }\n  };\n\n  Object.defineProperty(ActionImpl.prototype, \"parentActionImpl\", {\n    // easily access parentActionImpl after creation\n    get: function () {\n      return this.ancestors[this.ancestors.length - 1];\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ActionImpl.create = function (action, options) {\n    return new ActionImpl(action, options);\n  };\n\n  return ActionImpl;\n}();\n\nexports.ActionImpl = ActionImpl;","map":{"version":3,"sources":["/Users/DhritiGabani/personal-web/node_modules/kbar/lib/action/ActionImpl.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","ActionImpl","tiny_invariant_1","require","Command_1","action","options","_this","_a","ancestors","children","assign","id","name","perform","command","Command","history","parent","parentActionImpl","store","default","addChild","prototype","childActionImpl","unshift","push","removeChild","actionImpl","index","indexOf","splice","forEach","child","get","length","enumerable","configurable","create"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ActionImpl = void 0;\nvar tiny_invariant_1 = __importDefault(require(\"tiny-invariant\"));\nvar Command_1 = require(\"./Command\");\nvar ActionImpl = /** @class */ (function () {\n    function ActionImpl(action, options) {\n        var _this = this;\n        var _a;\n        this.ancestors = [];\n        this.children = [];\n        Object.assign(this, action);\n        this.id = action.id;\n        this.name = action.name;\n        var perform = action.perform;\n        this.command =\n            perform &&\n                new Command_1.Command({\n                    perform: function () { return perform(_this); },\n                }, {\n                    history: options.history,\n                });\n        // Backwards compatibility\n        this.perform = (_a = this.command) === null || _a === void 0 ? void 0 : _a.perform;\n        if (action.parent) {\n            var parentActionImpl = options.store[action.parent];\n            (0, tiny_invariant_1.default)(parentActionImpl, \"attempted to create an action whos parent: \" + action.parent + \" does not exist in the store.\");\n            parentActionImpl.addChild(this);\n        }\n    }\n    ActionImpl.prototype.addChild = function (childActionImpl) {\n        // add all ancestors for the child action\n        childActionImpl.ancestors.unshift(this);\n        var parent = this.parentActionImpl;\n        while (parent) {\n            childActionImpl.ancestors.unshift(parent);\n            parent = parent.parentActionImpl;\n        }\n        // we ensure that order of adding always goes\n        // parent -> children, so no need to recurse\n        this.children.push(childActionImpl);\n    };\n    ActionImpl.prototype.removeChild = function (actionImpl) {\n        var _this = this;\n        // recursively remove all children\n        var index = this.children.indexOf(actionImpl);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n        }\n        if (actionImpl.children) {\n            actionImpl.children.forEach(function (child) {\n                _this.removeChild(child);\n            });\n        }\n    };\n    Object.defineProperty(ActionImpl.prototype, \"parentActionImpl\", {\n        // easily access parentActionImpl after creation\n        get: function () {\n            return this.ancestors[this.ancestors.length - 1];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ActionImpl.create = function (action, options) {\n        return new ActionImpl(action, options);\n    };\n    return ActionImpl;\n}());\nexports.ActionImpl = ActionImpl;\n"]},"metadata":{},"sourceType":"script"}