{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KBarResults = void 0;\n\nvar React = __importStar(require(\"react\"));\n\nvar react_virtual_1 = require(\"react-virtual\");\n\nvar KBarSearch_1 = require(\"./KBarSearch\");\n\nvar useKBar_1 = require(\"./useKBar\");\n\nvar utils_1 = require(\"./utils\");\n\nvar START_INDEX = 0;\n\nvar KBarResults = function (props) {\n  var activeRef = React.useRef(null);\n  var parentRef = React.useRef(null); // store a ref to all items so we do not have to pass\n  // them as a dependency when setting up event listeners.\n\n  var itemsRef = React.useRef(props.items);\n  itemsRef.current = props.items;\n  var rowVirtualizer = (0, react_virtual_1.useVirtual)({\n    size: itemsRef.current.length,\n    parentRef: parentRef\n  });\n\n  var _a = (0, useKBar_1.useKBar)(function (state) {\n    return {\n      search: state.searchQuery,\n      currentRootActionId: state.currentRootActionId,\n      activeIndex: state.activeIndex\n    };\n  }),\n      query = _a.query,\n      search = _a.search,\n      currentRootActionId = _a.currentRootActionId,\n      activeIndex = _a.activeIndex,\n      options = _a.options;\n\n  React.useEffect(function () {\n    var handler = function (event) {\n      var _a;\n\n      if (event.key === \"ArrowUp\" || event.ctrlKey && event.key === \"p\") {\n        event.preventDefault();\n        query.setActiveIndex(function (index) {\n          var nextIndex = index > START_INDEX ? index - 1 : index; // avoid setting active index on a group\n\n          if (typeof itemsRef.current[nextIndex] === \"string\") {\n            if (nextIndex === 0) return index;\n            nextIndex -= 1;\n          }\n\n          return nextIndex;\n        });\n      } else if (event.key === \"ArrowDown\" || event.ctrlKey && event.key === \"n\") {\n        event.preventDefault();\n        query.setActiveIndex(function (index) {\n          var nextIndex = index < itemsRef.current.length - 1 ? index + 1 : index; // avoid setting active index on a group\n\n          if (typeof itemsRef.current[nextIndex] === \"string\") {\n            if (nextIndex === itemsRef.current.length - 1) return index;\n            nextIndex += 1;\n          }\n\n          return nextIndex;\n        });\n      } else if (event.key === \"Enter\") {\n        event.preventDefault(); // storing the active dom element in a ref prevents us from\n        // having to calculate the current action to perform based\n        // on the `activeIndex`, which we would have needed to add\n        // as part of the dependencies array.\n\n        (_a = activeRef.current) === null || _a === void 0 ? void 0 : _a.click();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handler);\n    return function () {\n      return window.removeEventListener(\"keydown\", handler);\n    };\n  }, [query]); // destructuring here to prevent linter warning to pass\n  // entire rowVirtualizer in the dependencies array.\n\n  var scrollToIndex = rowVirtualizer.scrollToIndex;\n  React.useEffect(function () {\n    scrollToIndex(activeIndex, {\n      // ensure that if the first item in the list is a group\n      // name and we are focused on the second item, to not\n      // scroll past that group, hiding it.\n      align: activeIndex <= 1 ? \"end\" : \"auto\"\n    });\n  }, [activeIndex, scrollToIndex]);\n  React.useEffect(function () {\n    // TODO(tim): fix scenario where async actions load in\n    // and active index is reset to the first item. i.e. when\n    // users register actions and bust the `useRegisterActions`\n    // cache, we won't want to reset their active index as they\n    // are navigating the list.\n    query.setActiveIndex( // avoid setting active index on a group\n    typeof props.items[START_INDEX] === \"string\" ? START_INDEX + 1 : START_INDEX);\n  }, [search, currentRootActionId, props.items, query]);\n  var execute = React.useCallback(function (item) {\n    var _a, _b;\n\n    if (typeof item === \"string\") return;\n\n    if (item.command) {\n      item.command.perform(item);\n      query.toggle();\n    } else {\n      query.setSearch(\"\");\n      query.setCurrentRootAction(item.id);\n    }\n\n    (_b = (_a = options.callbacks) === null || _a === void 0 ? void 0 : _a.onSelectAction) === null || _b === void 0 ? void 0 : _b.call(_a, item);\n  }, [query, options]);\n  var pointerMoved = (0, utils_1.usePointerMovedSinceMount)();\n  return React.createElement(\"div\", {\n    ref: parentRef,\n    style: {\n      maxHeight: props.maxHeight || 400,\n      position: \"relative\",\n      overflow: \"auto\"\n    }\n  }, React.createElement(\"div\", {\n    role: \"listbox\",\n    id: KBarSearch_1.KBAR_LISTBOX,\n    style: {\n      height: rowVirtualizer.totalSize + \"px\",\n      width: \"100%\"\n    }\n  }, rowVirtualizer.virtualItems.map(function (virtualRow) {\n    var item = itemsRef.current[virtualRow.index];\n    var handlers = typeof item !== \"string\" && {\n      onPointerMove: function () {\n        return pointerMoved && activeIndex !== virtualRow.index && query.setActiveIndex(virtualRow.index);\n      },\n      onPointerDown: function () {\n        return query.setActiveIndex(virtualRow.index);\n      },\n      onClick: function () {\n        return execute(item);\n      }\n    };\n    var active = virtualRow.index === activeIndex;\n    return React.createElement(\"div\", __assign({\n      ref: active ? activeRef : null,\n      id: (0, KBarSearch_1.getListboxItemId)(virtualRow.index),\n      role: \"option\",\n      \"aria-selected\": active,\n      key: virtualRow.index,\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        transform: \"translateY(\" + virtualRow.start + \"px)\"\n      }\n    }, handlers), React.cloneElement(props.onRender({\n      item: item,\n      active: active\n    }), {\n      ref: virtualRow.measureRef\n    }));\n  })));\n};\n\nexports.KBarResults = KBarResults;","map":{"version":3,"sources":["/Users/DhritiGabani/personal-web/node_modules/kbar/lib/KBarResults.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","exports","KBarResults","React","require","react_virtual_1","KBarSearch_1","useKBar_1","utils_1","START_INDEX","props","activeRef","useRef","parentRef","itemsRef","items","current","rowVirtualizer","useVirtual","size","_a","useKBar","state","search","searchQuery","currentRootActionId","activeIndex","query","options","useEffect","handler","event","key","ctrlKey","preventDefault","setActiveIndex","index","nextIndex","click","window","addEventListener","removeEventListener","scrollToIndex","align","execute","useCallback","item","_b","command","perform","toggle","setSearch","setCurrentRootAction","id","callbacks","onSelectAction","pointerMoved","usePointerMovedSinceMount","createElement","ref","style","maxHeight","position","overflow","role","KBAR_LISTBOX","height","totalSize","width","virtualItems","map","virtualRow","handlers","onPointerMove","onPointerDown","onClick","active","getListboxItemId","top","left","transform","start","cloneElement","onRender","measureRef"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KBarResults = void 0;\nvar React = __importStar(require(\"react\"));\nvar react_virtual_1 = require(\"react-virtual\");\nvar KBarSearch_1 = require(\"./KBarSearch\");\nvar useKBar_1 = require(\"./useKBar\");\nvar utils_1 = require(\"./utils\");\nvar START_INDEX = 0;\nvar KBarResults = function (props) {\n    var activeRef = React.useRef(null);\n    var parentRef = React.useRef(null);\n    // store a ref to all items so we do not have to pass\n    // them as a dependency when setting up event listeners.\n    var itemsRef = React.useRef(props.items);\n    itemsRef.current = props.items;\n    var rowVirtualizer = (0, react_virtual_1.useVirtual)({\n        size: itemsRef.current.length,\n        parentRef: parentRef,\n    });\n    var _a = (0, useKBar_1.useKBar)(function (state) { return ({\n        search: state.searchQuery,\n        currentRootActionId: state.currentRootActionId,\n        activeIndex: state.activeIndex,\n    }); }), query = _a.query, search = _a.search, currentRootActionId = _a.currentRootActionId, activeIndex = _a.activeIndex, options = _a.options;\n    React.useEffect(function () {\n        var handler = function (event) {\n            var _a;\n            if (event.key === \"ArrowUp\" || (event.ctrlKey && event.key === \"p\")) {\n                event.preventDefault();\n                query.setActiveIndex(function (index) {\n                    var nextIndex = index > START_INDEX ? index - 1 : index;\n                    // avoid setting active index on a group\n                    if (typeof itemsRef.current[nextIndex] === \"string\") {\n                        if (nextIndex === 0)\n                            return index;\n                        nextIndex -= 1;\n                    }\n                    return nextIndex;\n                });\n            }\n            else if (event.key === \"ArrowDown\" ||\n                (event.ctrlKey && event.key === \"n\")) {\n                event.preventDefault();\n                query.setActiveIndex(function (index) {\n                    var nextIndex = index < itemsRef.current.length - 1 ? index + 1 : index;\n                    // avoid setting active index on a group\n                    if (typeof itemsRef.current[nextIndex] === \"string\") {\n                        if (nextIndex === itemsRef.current.length - 1)\n                            return index;\n                        nextIndex += 1;\n                    }\n                    return nextIndex;\n                });\n            }\n            else if (event.key === \"Enter\") {\n                event.preventDefault();\n                // storing the active dom element in a ref prevents us from\n                // having to calculate the current action to perform based\n                // on the `activeIndex`, which we would have needed to add\n                // as part of the dependencies array.\n                (_a = activeRef.current) === null || _a === void 0 ? void 0 : _a.click();\n            }\n        };\n        window.addEventListener(\"keydown\", handler);\n        return function () { return window.removeEventListener(\"keydown\", handler); };\n    }, [query]);\n    // destructuring here to prevent linter warning to pass\n    // entire rowVirtualizer in the dependencies array.\n    var scrollToIndex = rowVirtualizer.scrollToIndex;\n    React.useEffect(function () {\n        scrollToIndex(activeIndex, {\n            // ensure that if the first item in the list is a group\n            // name and we are focused on the second item, to not\n            // scroll past that group, hiding it.\n            align: activeIndex <= 1 ? \"end\" : \"auto\",\n        });\n    }, [activeIndex, scrollToIndex]);\n    React.useEffect(function () {\n        // TODO(tim): fix scenario where async actions load in\n        // and active index is reset to the first item. i.e. when\n        // users register actions and bust the `useRegisterActions`\n        // cache, we won't want to reset their active index as they\n        // are navigating the list.\n        query.setActiveIndex(\n        // avoid setting active index on a group\n        typeof props.items[START_INDEX] === \"string\"\n            ? START_INDEX + 1\n            : START_INDEX);\n    }, [search, currentRootActionId, props.items, query]);\n    var execute = React.useCallback(function (item) {\n        var _a, _b;\n        if (typeof item === \"string\")\n            return;\n        if (item.command) {\n            item.command.perform(item);\n            query.toggle();\n        }\n        else {\n            query.setSearch(\"\");\n            query.setCurrentRootAction(item.id);\n        }\n        (_b = (_a = options.callbacks) === null || _a === void 0 ? void 0 : _a.onSelectAction) === null || _b === void 0 ? void 0 : _b.call(_a, item);\n    }, [query, options]);\n    var pointerMoved = (0, utils_1.usePointerMovedSinceMount)();\n    return (React.createElement(\"div\", { ref: parentRef, style: {\n            maxHeight: props.maxHeight || 400,\n            position: \"relative\",\n            overflow: \"auto\",\n        } },\n        React.createElement(\"div\", { role: \"listbox\", id: KBarSearch_1.KBAR_LISTBOX, style: {\n                height: rowVirtualizer.totalSize + \"px\",\n                width: \"100%\",\n            } }, rowVirtualizer.virtualItems.map(function (virtualRow) {\n            var item = itemsRef.current[virtualRow.index];\n            var handlers = typeof item !== \"string\" && {\n                onPointerMove: function () {\n                    return pointerMoved &&\n                        activeIndex !== virtualRow.index &&\n                        query.setActiveIndex(virtualRow.index);\n                },\n                onPointerDown: function () { return query.setActiveIndex(virtualRow.index); },\n                onClick: function () { return execute(item); },\n            };\n            var active = virtualRow.index === activeIndex;\n            return (React.createElement(\"div\", __assign({ ref: active ? activeRef : null, id: (0, KBarSearch_1.getListboxItemId)(virtualRow.index), role: \"option\", \"aria-selected\": active, key: virtualRow.index, style: {\n                    position: \"absolute\",\n                    top: 0,\n                    left: 0,\n                    width: \"100%\",\n                    transform: \"translateY(\" + virtualRow.start + \"px)\",\n                } }, handlers), React.cloneElement(props.onRender({\n                item: item,\n                active: active,\n            }), {\n                ref: virtualRow.measureRef,\n            })));\n        }))));\n};\nexports.KBarResults = KBarResults;\n"]},"metadata":{},"sourceType":"script"}